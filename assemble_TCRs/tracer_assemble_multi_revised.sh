
#/////////////////////////////////////////////////////////////////////////
#/////////////////////////////////////////////////////////////////////////
# script: tracer_assemble_multi_revised.sh
# author: Lincoln Harris
# date: 7.3.18
# 
# I think this is working...lets try it on all 800 cells
# 7.8 edits -- changed up the naming schema
#/////////////////////////////////////////////////////////////////////////
#/////////////////////////////////////////////////////////////////////////
#!/bin/bash

driver () {
	docker run --rm -v $PWD:/scratch -w /scratch teichlab/tracer assemble --ncores 4 --species Hsap ./*_R1_001.fastq ./*_R2_001.fastq ${dir} ./trinity_out
}

root_dir=/home/ubuntu/sandbox_expansion/08-newTCells7.19

i=0

for dir in *; 
do 
	cd ${root_dir}/$dir
	driver "$dir" &
	cd .. 

	if (( $i % 14 == 0 )); 
	then 
		wait; 
	fi
	i=$((i+1))
done

#/////////////////////////////////////////////////////////////////////////
#/////////////////////////////////////////////////////////////////////////
